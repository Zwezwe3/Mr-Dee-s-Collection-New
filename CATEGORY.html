<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CATEGORY â€“ Mr Dee's Collection</title>
<link rel="stylesheet" href="style.css">

<style>
body { font-family: Arial, sans-serif; background:#f0f0f0; margin:0; }
header { text-align:center; padding:20px; background:#004080; color:#fff; }
header h1 { margin:0; }
nav { background:#003366; display:flex; justify-content:center; flex-wrap:wrap; padding:10px 0; }
nav a { color:#fff; text-decoration:none; margin:0 12px; font-weight:bold; }
nav a:hover { color:#ffeb3b; }
main { max-width:1200px; margin:20px auto; padding:10px; }
.products-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:20px; }
.product { background:#fff; border-radius:10px; box-shadow:0 3px 8px rgba(0,0,0,0.1); text-align:center; padding:10px; cursor:pointer; transition:0.3s; }
.product:hover { transform:scale(1.05); box-shadow:0 6px 15px rgba(0,0,0,0.15); }
.product img { width:100%; height:auto; border-radius:5px; }
.price { color:#004080; font-weight:bold; margin-top:5px; }
.modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000; }
.modal-content { background:#fff; padding:20px; border-radius:10px; max-width:500px; width:90%; text-align:center; position:relative; }
.close { position:absolute; top:10px; right:15px; font-size:24px; font-weight:bold; cursor:pointer; color:#004080; }
.add-cart-btn { background:#004080; color:#fff; padding:10px 15px; border:none; border-radius:5px; margin-top:10px; cursor:pointer; }
#miniCart { position:fixed; bottom:20px; right:20px; background:#004080; color:#fff; padding:10px 15px; border-radius:8px; font-weight:bold; cursor:pointer; z-index:1000; }
.whatsapp-btn { position:fixed; bottom:100px; right:20px; width:60px; height:60px; border-radius:50%; background:#25D366; color:#fff; font-size:30px; display:flex; justify-content:center; align-items:center; text-decoration:none; z-index:1000; }
</style>
</head>

<body>

<header>
  <h1>Mr Dee's Collection</h1>
  <p>Quality Tech and Footwear</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="products.html">Products</a>
  <a href="jeans.html">Jeans</a>
  <a href="shoes.html">Shoes</a>
  <a href="phones.html">Phones</a>
  <a href="gallery.html">Gallery</a>
  <a href="contact.html">Contact</a>
</nav>

<main>
  <h2 style="text-align:center;">CATEGORY</h2>
  <div class="products-grid" id="category-products"></div>
</main>

<!-- Modal -->
<div class="modal" id="productModal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <img id="modalImage" style="width:100%; border-radius:8px;">
    <h3 id="modalName"></h3>
    <p id="modalSpecs"></p>
    <p id="modalPrice" class="price"></p>
    <button class="add-cart-btn">Add to Cart</button>
  </div>
</div>

<div id="miniCart">Cart: 0 items</div>
<a href="https://wa.me/27628952301" target="_blank" class="whatsapp-btn">&#9993;</a>

<script src="products.js"></script>
<script>
// Set this for each page: 'shoes', 'jeans', 'phones', 'laptops'
const CATEGORY = "shoes";

const container = document.getElementById("category-products");
let cart = [];

function renderCategory() {
  container.innerHTML = "";
  products.filter(p => p.category === CATEGORY).forEach(product => {
    const card = document.createElement("div");
    card.className = "product";
    card.innerHTML = `<img src="${product.image}" alt="${product.name}">
                      <p><strong>${product.name}</strong><br>R${product.price}</p>`;
    card.addEventListener("click", () => openModal(product));
    container.appendChild(card);
  });
}

const modal = document.getElementById("productModal");
const modalImage = document.getElementById("modalImage");
const modalName = document.getElementById("modalName");
const modalSpecs = document.getElementById("modalSpecs");
const modalPrice = document.getElementById("modalPrice");
const closeModal = document.querySelector(".close");
const addCartBtn = document.querySelector(".add-cart-btn");
const miniCart = document.getElementById("miniCart");

function openModal(product) {
  modal.style.display = "flex";
  modalImage.src = product.image;
  modalName.textContent = product.name;
  modalSpecs.textContent = product.specs;
  modalPrice.textContent = "R" + product.price;
  addCartBtn.onclick = () => {
    cart.push(product);
    updateCart();
    modal.style.display = "none";
  }
}

closeModal.onclick = () => modal.style.display = "none";
window.onclick = e => { if(e.target == modal) modal.style.display = "none"; }

function updateCart() {
  miniCart.textContent = "Cart: " + cart.length + " item(s)";
  miniCart.onclick = () => {
    let msg = "Hello Mr Dee, I would like to order:\n";
    cart.forEach((item,i) => msg += `${i+1}x ${item.name} - R${item.price}\n`);
    window.open("https://wa.me/27628952301?text=" + encodeURIComponent(msg), "_blank");
  }
}

renderCategory();
</script>

</body>
</html>
